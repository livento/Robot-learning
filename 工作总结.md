# 四月上半月工作记录
## 仿真软件 
### 1：isaacsim安装需要先安装nucleus并创建服务器，创建服务器中会包含一个Nidia文件夹，无法编辑，里面包含Nvidia的部分asset文件和机器模型，在调用isaacsim的部分core时会用到。其中nucles里的NVIDIA文件夹并不在本地，而是位于Amazon的服务器上。
### 2：本地的pkg中，python代码位于exts,extscache,extsPhysics等文件夹中，使用kit/python/bin中的python环境运行代码。在看python扩展的示例代码时，直接从isaacsim打开文件夹难以跳转引用，但是从根目录打开的时候可以正确跳转。原因在于isaacsim不是作为一个库被安装，需要在对应目录下才能看到import的具体信息。（大python工程的架构仍然不甚清楚）
### 3：isaacsim在服务器上以docker形式运行。由脚本启动docker，会将docker内部的log，data等文件夹挂载在服务器上，方便在服务器层面查看修改docker内容。非挂载内容是暂时性的修改，退出之后会消失，注意使用docker commit保存。似乎并不推荐此种方法，另一种方法称为卷暂时还没有接触。
### 4：docker启动使用参数-id就可以在退出后启动保护程序保证docker的后台运行，使用--rm参数可以保证docker在stop后可以直接被销毁，否则需要使用docker ps -a查找已停止的docker手动删除。再次进入使用docker exec -it docker_id bash即可。
### 5：可以使用alias设置环境变量PYTHON_PATH为对应脚本文件以方便运行，自带环境安装包需要使用PTRHON_PATH -m pip install 进行安装

## 算法
### 1：pinocchio库安装的时候需要使用boost进行python和c++代码的连接。通常情况下在安装库的时候会自动安装合适版本的boost。0416发现bug,出现机制暂定为由于之前安装ROS时进行了关于boost的设置，导致在3.10版本安装pinocchio时，仍使用了之前ros安装的不合适的boost版本1.71，而3.10下的pinocchio需要至少1.83版本的boost。解决方案是卸载原boost就可以正确连接到适合版本的波哦三天从而完成import。在从未安装过ROS的docker中并未出现相同bug
### 2：逆运动学解算出现抖动的原因是在matlab中计算出的轨迹有效位数是15位，保存到txt中并最终被python代码读取的数据只有6位，因此原始轨迹数据本身就是抖动的。以后开发工作中使用txt进行数据转接的时候需要注意在当前为环境下进行验证，确保后续使用的数据的正常。
### 3：pinocchio的每次import urdf会造成很大的效率损耗，需要实现创建好model和data将其作为参数传入逆运动学计算的函数，避免每一次都要重新加载。

## 硬件
### 1：收到建议可以使用pinocchio动力学功能计算不同关节角度时候的关节输出力矩，将其作为前馈输入到驱动器中可以很大程度上优化运动效果。
### 2：hyy robot 系统中，device接口中所认同的的device结构在busconfig中已经定义好了，只有传进来的字段符合busconfig需求的才会被系统识别成device。而device的具体定义在deviceconfig文件中。因此在c++代码中调用关于device的接口时只包含电机，而不会将imu等识别为device。
### 3：twincat电机点动调试，下方++ +等速度在参数中可调。已在thinkpad中建立好对应项目。



# 四月下半月工作记录
## 仿真软件
### 1：orbit 扩展模板一堆问题暂待解决